<div class="container">
    <div class="table-responsive">
        <table class="table">
          <thead class=" text-primary">
            <th>
                ID Ducto
            </th>
            <th>
                Numero de Tramo
            </th>
            <th>
                ID de Fabricación
            </th>
            <th>
               Tipo Material
           </th>
           <th>
             Fecha Montaje
         </th>
           <th>
             Girado
           </th>
           <th>
             Linea
           </th>
            <th>
                Anillos
            </th>

            <th >
             Código QR
             </th>
             <th >
              Editar
              </th>
          </thead>
          <tbody *ngFor="let x of listaDuctos | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage, id: 'custom-pagination' }">
            <tr>
                <td>
                  {{x.id_ducto}}
                </td>
                <td>
                 {{x.N_Tramo}}
                </td>
                <td>
                 {{x.id_fabricacion}}
                </td>
                <td>
                 {{obtenerTipoMaterialPorId(x.id_tipo_material)}}
                </td>
                <td>
                 {{formatearFecha(x.fecha_montaje)}}
                </td>
                <td>
                 {{x.girado == 1 ? 'SI':'NO'}}
                </td>
                <td>
                 {{obtenerLineasPorId(x.id_linea)}}
                </td>

                <td [width]="200">
                 <div class="row">
                  <div class="col-4">
                    <button class="btn btn-info" >
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-1-circle" viewBox="0 0 16 16">
                          <path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0M9.283 4.002V12H7.971V5.338h-.065L6.072 6.656V5.385l1.899-1.383z"/>
                        </svg>
                   </button>
                  </div>
                  <div class="col-4">
                    <button class="btn btn-success">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-2-circle" viewBox="0 0 16 16">
                          <path d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0M6.646 6.24v.07H5.375v-.064c0-1.213.879-2.402 2.637-2.402 1.582 0 2.613.949 2.613 2.215 0 1.002-.6 1.667-1.287 2.43l-.096.107-1.974 2.22v.077h3.498V12H5.422v-.832l2.97-3.293c.434-.475.903-1.008.903-1.705 0-.744-.557-1.236-1.313-1.236-.843 0-1.336.615-1.336 1.306"/>
                        </svg>
                    </button>
                  </div>

                  <div class="col-4">
                    <button class="btn  btn-secondary" >
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-3-circle" viewBox="0 0 16 16">
                          <path d="M7.918 8.414h-.879V7.342h.838c.78 0 1.348-.522 1.342-1.237 0-.709-.563-1.195-1.348-1.195-.79 0-1.312.498-1.348 1.055H5.275c.036-1.137.95-2.115 2.625-2.121 1.594-.012 2.608.885 2.637 2.062.023 1.137-.885 1.776-1.482 1.875v.07c.703.07 1.71.64 1.734 1.917.024 1.459-1.277 2.396-2.93 2.396-1.705 0-2.707-.967-2.754-2.144H6.33c.059.597.68 1.06 1.541 1.066.973.006 1.6-.563 1.588-1.354-.006-.779-.621-1.318-1.541-1.318"/>
                          <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8"/>
                        </svg>
                    </button>
                  </div>
                 </div>
                </td>
                <td style="padding-left:20px;">
                  <button type="button" class="btn btn-light" (click)="abrirModalQr(x.id_ducto)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code" viewBox="0 0 16 16">
                      <path d="M2 2h2v2H2z"/>
                      <path d="M6 0v6H0V0zM5 1H1v4h4zM4 12H2v2h2z"/>
                      <path d="M6 10v6H0v-6zm-5 1v4h4v-4zm11-9h2v2h-2z"/>
                      <path d="M10 0v6h6V0zm5 1v4h-4V1zM8 1V0h1v2H8v2H7V1zm0 5V4h1v2zM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8zm0 0v1H2V8H1v1H0V7h3v1zm10 1h-1V7h1zm-1 0h-1v2h2v-1h-1zm-4 0h2v1h-1v1h-1zm2 3v-1h-1v1h-1v1H9v1h3v-2zm0 0h3v1h-2v1h-1zm-4-1v1h1v-2H7v1z"/>
                      <path d="M7 12h1v3h4v1H7zm9 2v2h-3v-1h2v-1z"/>
                    </svg>
                  </button>
                </td>
                <td style="padding-left:20px;">
                  <button type="button" class="btn btn-warning" (click)="openModalEditar(x.id_ducto)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-fill" viewBox="0 0 16 16">
                      <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"/>
                    </svg>
                  </button>
                </td>
            </tr>
          </tbody>
        </table>
        <!-- <pagination-controls (pageChange)="pageChanged($event)" id="custom-pagination"></pagination-controls> -->
        <div class="row">
          <div class="col-md-4">
              <!-- Botón para imprimir PDF -->
              <button class="btn btn-primary" (click)="generarPDFsMasivos()">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code" viewBox="0 0 16 16">
                  <path d="M2 2h2v2H2z"/>
                  <path d="M6 0v6H0V0zM5 1H1v4h4zM4 12H2v2h2z"/>
                  <path d="M6 10v6H0v-6zm-5 1v4h4v-4zm11-9h2v2h-2z"/>
                  <path d="M10 0v6h6V0zm5 1v4h-4V1zM8 1V0h1v2H8v2H7V1zm0 5V4h1v2zM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8zm0 0v1H2V8H1v1H0V7h3v1zm10 1h-1V7h1zm-1 0h-1v2h2v-1h-1zm-4 0h2v1h-1v1h-1zm2 3v-1h-1v1h-1v1H9v1h3v-2zm0 0h3v1h-2v1h-1zm-4-1v1h1v-2H7v1z"/>
                  <path d="M7 12h1v3h4v1H7zm9 2v2h-3v-1h2v-1z"/>
                </svg>
                  QR masivo
              </button>
          </div>
          <div class="col-md-4">
            <!-- Botón para imprimir PDF -->
            <button class="btn btn-success" (click)="openModalIngresar()">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-printer" viewBox="0 0 16 16">
                    <path d="M0 1V4H16V1H0zM15 5H1v8h14V5zM1 13V15h14v-2H1zm5-7H4v-1h2v1zM3 9h2v1H3V9z"/>
                </svg>
                Ingresar Ductos
            </button>
        </div>
          <div class="col-md-4">
              <!-- Paginador ... -->
              <pagination-controls (pageChange)="pageChanged($event)" id="custom-pagination"></pagination-controls>
          </div>
      </div>
      </div>
</div>

<div *ngIf="modalQr" class="overlay">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Generar QR de Ducto</h5>
        <button type="button" class="close"  (click)="closeModalQR()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="modal-body">
          <ngx-qrcode
          [elementType]="elementType"
          [value]="ductoUrl"
          cssClass="aclass"
          errorCorrectionLevel="L">
        </ngx-qrcode>
        </div>
      </div>
      <div class="modal-footer">
        <!-- Botones para acciones en el modal -->
        <button class="btn btn-primary" style="margin: 20px;" (click)="downloadPDF(this.id_descarga)" >Descargar QR</button>
        <button class="btn btn-danger" style="margin: 20px;" (click)="closeModalQR()" >Cancelar</button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="modalIngreasrDuctos" class="overlay">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Ingresar Ductos</h5>
        <button type="button" class="close"  (click)="closeModalIngresar()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-6">
            <label for="">ID Ducto : </label>
            <input type="text">
          </div>
          <div class="col-6">
            <label for="">ID Fabricacion: </label>
            <input type="text">
          </div>
        </div>
        <div class="row" style="padding-top: 7px;">
          <div class="col-6">
            <label for="tipoMaterial">Tipo Material</label>
            <select id="tipoMaterial" class="form-control">
              <option value="material1">Material 1</option>
              <option value="material2">Material 2</option>
              <!-- Agrega más opciones según sea necesario -->
            </select>
          </div>
        
          <div class="col-6">
            <label for="fechaMontaje">Fecha Montaje</label>
            <input type="text">
          </div>
        </div>

         <div class="row" style="padding-top: 7px;">
          <div class="col-6">
            <label for="tipoMaterial">Linea</label>
            <select id="tipoMaterial" class="form-control">
              <option value="material1">Principal</option>
              <option value="material2">ByPass</option>
              <option value="material2">Muro</option>
              <option value="material2">Lateral</option>
              <!-- Agrega más opciones según sea necesario -->
            </select>
          </div>
        
          <div class="col-6">
            <label for="fechaMontaje">Numero Tramo</label>
            <input type="text">
          </div>
        </div>

        <div class="row" style="padding-top: 7px;">
          <div class="col-12">
            <label for="tipoMaterial">Girado</label>
            <select id="tipoMaterial" class="form-control">
              <option value="material1">SI</option>
              <option value="material2">NO</option>
              <!-- Agrega más opciones según sea necesario -->
            </select>
          </div>
        </div>
        
        <!-- <div class="modal-body">
          <ngx-qrcode
          [elementType]="elementType"
          [value]="ductoUrl"
          cssClass="aclass"
          errorCorrectionLevel="L">
        </ngx-qrcode>
        </div> -->
      </div>
      <div class="modal-footer">
        <!-- Botones para acciones en el modal -->
        <button class="btn btn-success" style="margin: 20px;"  >Ingresar ducto</button>
        <button class="btn btn-danger" style="margin: 20px;" (click)="closeModalIngresar()" >Cancelar</button>
      </div>
    </div>
  </div>
</div>



<div *ngIf="modalEditarDuctos" class="overlay">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Editar Ductos</h5>
        <button type="button" class="close"  (click)="closeModalEditar()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-6">
            <label for="">ID Ducto : </label>
            <input type="text" class="form-control" id="IdDucto" value="">
          </div>
          <div class="col-6">
            <label for="">ID Fabricacion: </label>
            <input type="text" class="form-control" id="IdFabricacion" value="">
          </div>
        </div>
        <div class="row" style="padding-top: 7px;">
          <div class="col-6">
            <label for="tipoMaterial">Tipo Material</label>
            <select id="tipoMaterial" class="form-control">
              <option value="material1">Material 1</option>
              <option value="material2">Material 2</option>
              <!-- Agrega más opciones según sea necesario -->
            </select>
          </div>
        
          <div class="col-6">
            <label for="fechaMontaje">Fecha Montaje</label>
            <input type="text">
          </div>
        </div>

         <div class="row" style="padding-top: 7px;">
          <div class="col-6">
            <label for="tipoMaterial">Linea</label>
            <select id="tipoMaterial" class="form-control">
              <option value="material1">Principal</option>
              <option value="material2">ByPass</option>
              <option value="material2">Muro</option>
              <option value="material2">Lateral</option>
              <!-- Agrega más opciones según sea necesario -->
            </select>
          </div>
        
          <div class="col-6">
            <label for="fechaMontaje">Numero Tramo</label>
            <input type="text">
          </div>
        </div>

        <div class="row" style="padding-top: 7px;">
          <div class="col-12">
            <label for="tipoMaterial">Girado</label>
            <select id="tipoMaterial" class="form-control">
              <option value="material1">SI</option>
              <option value="material2">NO</option>
              <!-- Agrega más opciones según sea necesario -->
            </select>
          </div>
        </div>
        
        <!-- <div class="modal-body">
          <ngx-qrcode
          [elementType]="elementType"
          [value]="ductoUrl"
          cssClass="aclass"
          errorCorrectionLevel="L">
        </ngx-qrcode>
        </div> -->
      </div>
      <div class="modal-footer">
        <!-- Botones para acciones en el modal -->
        <button class="btn btn-success" style="margin: 20px;"  >Ingresar ducto</button>
        <button class="btn btn-danger" style="margin: 20px;" (click)="closeModalEditar()" >Cancelar</button>
      </div>
    </div>
  </div>
</div>

